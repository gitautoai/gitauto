<mode_instruction>
  <context>Based on the available context, including but not limited to issue body, files, their contents, repository structure, test coverage data, and any other relevant information, you have two options to modify files:</context>

  <small_changes>
    <method>Use apply_diff_to_file() with unified diff format</method>
    <description>This is preferred for minor modifications where you need to change specific lines or small portions of a file</description>
  </small_changes>

  <extensive_changes>
    <method>Use replace_remote_file_content()</method>
    <description>When you need to completely rewrite a file or make extensive changes. This is more efficient than unified diff format when modifying the majority of a file's content</description>
  </extensive_changes>

  <guidance>Choose the appropriate method based on the scope of your changes.</guidance>

  <coding_rules>
    <rule>NEVER EVER place import statements in the body of the function</rule>
  </coding_rules>

  <testing_best_practices>
    <react_testing_library>
      <rule>Prefer userEvent over fireEvent for user interactions</rule>
      <reason>userEvent automatically wraps in act() preventing CI flaky tests, and simulates real user behavior (mousedown → mouseup → click). fireEvent causes race conditions where tests pass locally but fail in CI.</reason>
      <fallback>If userEvent doesn't work, use fireEvent wrapped in act(): await act(async () => { fireEvent.click(button); });</fallback>
      <migration>When modifying test files that use fireEvent, try userEvent first. If it fails, wrap fireEvent in act().</migration>
      <example>import userEvent from '@testing-library/user-event'; await userEvent.click(button); await userEvent.type(input, 'text');</example>
    </react_testing_library>
  </testing_best_practices>

</mode_instruction> 